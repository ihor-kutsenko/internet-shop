{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,uCCCA,SAASC,IACP,IAAIC,EAAMC,SAASC,cAAc,UAGjC,OAFAF,EAAIG,UAAUC,IAAI,cAClBJ,EAAIK,YAAc,uBACXL,C,CDET,IACiBM,EADXC,EAAON,SAASO,cAAc,YAC9BC,EAAgE,QAArDH,EAAAI,KAAKC,MAAMC,aAAaC,QAAQhB,EAAAiB,OAAOC,sBAAc,IAArDT,IAAyD,GAmC1E,SAASU,EAAmBC,GAG1B,GAFAA,EAAIC,iBAEAD,EAAIE,OAAOhB,UAAUiB,SAAS,sBAAuB,CACvD,IAAMC,EAAUC,EAAYL,EAAIE,QAC1BI,EAAQd,EAASe,WAAU,SAAAC,G,OAAKA,EAAFC,KAAgBL,EAAQK,E,KAC9C,IAAVH,IACFd,EAASkB,OAAOJ,EAAO,GACvBX,aAAagB,QAAQ/B,EAAAiB,OAAOC,aAAcL,KAAKmB,UAAUpB,KACzD,EAAAqB,EAAAC,cAAatB,EAAUF,GACvByB,SAASC,S,EAYf,SAASX,EAAYY,GACnB,IAAMC,EAAYC,OAAOF,EAAKG,QAAQ,YAAYC,QAAQZ,IAC1D,OAAOa,EAAAC,YAAYC,MAAK,SAAAhB,G,OAAKA,EAAFC,KAAgBS,C,KAzD7C,EAAAL,EAAAC,cAAatB,EAAUF,GAAM,GAE7BA,EAAKmC,iBAAiB,SAEtB,SAAiBzB,GAGf,GAFAA,EAAIC,iBAEAD,EAAIE,OAAOhB,UAAUiB,SAAS,WAAY,CAC5C,IAAMC,EAAUC,EAAYL,EAAIE,SAChC,EAAAwB,EAAAC,aAAYvB,GACZ,IAAMwB,EAAc5B,EAAIE,OAAOkB,QAAQ,YACjCS,EAAY/C,IAClB8C,EAAYrC,cAAc,qBAAqBuC,YAAYD,E,MACtD,GAAI7B,EAAIE,OAAOhB,UAAUiB,SAAS,eAAgB,EAa3D,SAAuBC,IAyBvB,SAA6BA,GAC3B,OAAOZ,EAASuC,MAAK,SAAAvB,G,OAAKA,EAAFC,KAAgBL,EAAQK,E,KAzB3CuB,CAAoB5B,KACvBZ,EAASyC,KAAK7B,GACdT,aAAagB,QAAQ/B,EAAAiB,OAAOC,aAAcL,KAAKmB,UAAUpB,I,CAdzD0C,CADgB7B,EAAYL,EAAIE,SAEhC,IAAMiC,EAAcnC,EAAIE,OAAOkB,QAAQ,YACjCgB,EAAYtD,IAClBqD,EAAY5C,cAAc,qBAAqBuC,YAAYM,E,MACtD,GAAIpC,EAAIE,OAAOhB,UAAUiB,SAAS,cAAe,CAEtDJ,EADgBM,EAAYL,EAAIE,SAEhCF,EAAIE,OAAOmC,WAAWC,Q,KA0B1BhD,EAAKmC,iBAAiB,QAAS1B,E","sources":["src/favorite.js","src/helpers/createRemoveBtn.js"],"sourcesContent":["import { common } from './common';\nimport { createMarkup } from './helpers/createMarkup';\nimport { createModal } from './helpers/createModal';\nimport { instruments } from './helpers/instruments';\nimport { createRemoveBtn } from './helpers/createRemoveBtn';\nimport './styles.css';\n\nconst list = document.querySelector(\".js-list\");\nconst favorite = JSON.parse(localStorage.getItem(common.KEY_FAVORITE)) ?? [];\n\ncreateMarkup(favorite, list, true);\n\nlist.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  evt.preventDefault();\n\n  if (evt.target.classList.contains('js-info')) {\n    const product = findProduct(evt.target);\n    createModal(product);\n    const cardElement = evt.target.closest('.js-card');\n    const removeBtn = createRemoveBtn();\n    cardElement.querySelector('.js-btn-container').appendChild(removeBtn);\n  } else if (evt.target.classList.contains('js-favorite')) {\n    const product = findProduct(evt.target);\n    addToFavorite(product);\n    const cardElement = evt.target.closest('.js-card');\n    const removeBtn = createRemoveBtn();\n    cardElement.querySelector('.js-btn-container').appendChild(removeBtn);\n  } else if (evt.target.classList.contains('remove-btn')) {\n    const product = findProduct(evt.target);\n    removeFromFavorite(product);\n    evt.target.parentNode.remove();\n  }\n}\n\nfunction addToFavorite(product) {\n  if (!isProductInFavorite(product)) {\n    favorite.push(product);\n    localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(favorite));\n  }\n}\n\nfunction removeFromFavorite(evt) {\n  evt.preventDefault();\n\n  if (evt.target.classList.contains('js-remove-favorite')) {\n    const product = findProduct(evt.target);\n    const index = favorite.findIndex(({ id }) => id === product.id);\n    if (index !== -1) {\n      favorite.splice(index, 1);\n      localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(favorite));\n      createMarkup(favorite, list);\n      location.reload(); // Оновлення сторінки\n    }\n  }\n}\n\nlist.addEventListener('click', removeFromFavorite);\n\n\nfunction isProductInFavorite(product) {\n  return favorite.some(({ id }) => id === product.id);\n}\n\nfunction findProduct(elem) {\n  const productId = Number(elem.closest('.js-card').dataset.id);\n  return instruments.find(({ id }) => id === productId);\n}\n","\nfunction createRemoveBtn() {\n  let btn = document.createElement('button');\n  btn.classList.add('remove-btn');\n  btn.textContent = 'Remove from Favorite';\n  return btn;\n}\n\nexport { createRemoveBtn };"],"names":["$7jJJd","parcelRequire","$8ce3aaf8a65a68b4$export$870baaf8e3c75e6c","btn","document","createElement","classList","add","textContent","$19661b0c25203147$var$ref","$19661b0c25203147$var$list","querySelector","$19661b0c25203147$var$favorite","JSON","parse","localStorage","getItem","common","KEY_FAVORITE","$19661b0c25203147$var$removeFromFavorite","evt","preventDefault","target","contains","product","$19661b0c25203147$var$findProduct","index","findIndex","param","id","splice","setItem","stringify","$l1rGz","createMarkup","location","reload","elem","productId","Number","closest","dataset","$IPVlA","instruments","find","addEventListener","$87LyB","createModal","cardElement","removeBtn","appendChild","some","$19661b0c25203147$var$isProductInFavorite","push","$19661b0c25203147$var$addToFavorite","cardElement1","removeBtn1","parentNode","remove"],"version":3,"file":"favorite.beeeb395.js.map"}