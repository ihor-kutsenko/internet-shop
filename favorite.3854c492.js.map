{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,uCCCA,SAASC,IACP,IAAIC,EAAMC,SAASC,cAAc,UAGjC,OAFAF,EAAIG,UAAUC,IAAI,cAClBJ,EAAIK,YAAc,uBACXL,C,CDET,MAAMM,EAAOL,SAASM,cAAc,Y,IACnBC,EAAjB,MAAMC,EAAgE,QAArDD,EAAAE,KAAKC,MAAMC,aAAaC,QAAQhB,EAAAiB,OAAOC,sBAAc,IAArDP,IAAyD,GAmC1E,SAASQ,EAAmBC,GAG1B,GAFAA,EAAIC,iBAEAD,EAAIE,OAAOhB,UAAUiB,SAAS,sBAAuB,CACvD,MAAMC,EAAUC,EAAYL,EAAIE,QAC1BI,EAAQd,EAASe,WAAU,EAACC,GAAEA,KAASA,IAAOJ,EAAQI,MAC9C,IAAVF,IACFd,EAASiB,OAAOH,EAAO,GACvBX,aAAae,QAAQ9B,EAAAiB,OAAOC,aAAcL,KAAKkB,UAAUnB,KACzD,EAAAoB,EAAAC,cAAarB,EAAUH,GACvByB,SAASC,S,EAYf,SAASV,EAAYW,GACnB,MAAMC,EAAYC,OAAOF,EAAKG,QAAQ,YAAYC,QAAQZ,IAC1D,OAAOa,EAAAC,YAAYC,MAAK,EAACf,GAAEA,KAASA,IAAOS,G,EAzD7C,EAAAL,EAAAC,cAAarB,EAAUH,GAAM,GAE7BA,EAAKmC,iBAAiB,SAEtB,SAAiBxB,GAGf,GAFAA,EAAIC,iBAEAD,EAAIE,OAAOhB,UAAUiB,SAAS,WAAY,CAC5C,MAAMC,EAAUC,EAAYL,EAAIE,SAChC,EAAAuB,EAAAC,aAAYtB,GACZ,MAAMuB,EAAc3B,EAAIE,OAAOiB,QAAQ,YACjCS,EAAY9C,IAClB6C,EAAYrC,cAAc,qBAAqBuC,YAAYD,E,MACtD,GAAI5B,EAAIE,OAAOhB,UAAUiB,SAAS,eAAgB,EAa3D,SAAuBC,IAyBvB,SAA6BA,GAC3B,OAAOZ,EAASsC,MAAK,EAACtB,GAAEA,KAASA,IAAOJ,EAAQI,I,EAzB3CuB,CAAoB3B,KACvBZ,EAASwC,KAAK5B,GACdT,aAAae,QAAQ9B,EAAAiB,OAAOC,aAAcL,KAAKkB,UAAUnB,I,CAdzDyC,CADgB5B,EAAYL,EAAIE,SAEhC,MAAMyB,EAAc3B,EAAIE,OAAOiB,QAAQ,YACjCS,EAAY9C,IAClB6C,EAAYrC,cAAc,qBAAqBuC,YAAYD,E,MACtD,GAAI5B,EAAIE,OAAOhB,UAAUiB,SAAS,cAAe,CAEtDJ,EADgBM,EAAYL,EAAIE,SAEhCF,EAAIE,OAAOgC,WAAWC,Q,KA0B1B9C,EAAKmC,iBAAiB,QAASzB","sources":["src/favorite.js","src/helpers/createRemoveBtn.js"],"sourcesContent":["import { common } from './common';\nimport { createMarkup } from './helpers/createMarkup';\nimport { createModal } from './helpers/createModal';\nimport { instruments } from './helpers/instruments';\nimport { createRemoveBtn } from './helpers/createRemoveBtn';\nimport './styles.css';\n\nconst list = document.querySelector(\".js-list\");\nconst favorite = JSON.parse(localStorage.getItem(common.KEY_FAVORITE)) ?? [];\n\ncreateMarkup(favorite, list, true);\n\nlist.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  evt.preventDefault();\n\n  if (evt.target.classList.contains('js-info')) {\n    const product = findProduct(evt.target);\n    createModal(product);\n    const cardElement = evt.target.closest('.js-card');\n    const removeBtn = createRemoveBtn();\n    cardElement.querySelector('.js-btn-container').appendChild(removeBtn);\n  } else if (evt.target.classList.contains('js-favorite')) {\n    const product = findProduct(evt.target);\n    addToFavorite(product);\n    const cardElement = evt.target.closest('.js-card');\n    const removeBtn = createRemoveBtn();\n    cardElement.querySelector('.js-btn-container').appendChild(removeBtn);\n  } else if (evt.target.classList.contains('remove-btn')) {\n    const product = findProduct(evt.target);\n    removeFromFavorite(product);\n    evt.target.parentNode.remove();\n  }\n}\n\nfunction addToFavorite(product) {\n  if (!isProductInFavorite(product)) {\n    favorite.push(product);\n    localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(favorite));\n  }\n}\n\nfunction removeFromFavorite(evt) {\n  evt.preventDefault();\n\n  if (evt.target.classList.contains('js-remove-favorite')) {\n    const product = findProduct(evt.target);\n    const index = favorite.findIndex(({ id }) => id === product.id);\n    if (index !== -1) {\n      favorite.splice(index, 1);\n      localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(favorite));\n      createMarkup(favorite, list);\n      location.reload(); // Оновлення сторінки\n    }\n  }\n}\n\nlist.addEventListener('click', removeFromFavorite);\n\n\nfunction isProductInFavorite(product) {\n  return favorite.some(({ id }) => id === product.id);\n}\n\nfunction findProduct(elem) {\n  const productId = Number(elem.closest('.js-card').dataset.id);\n  return instruments.find(({ id }) => id === productId);\n}\n","\nfunction createRemoveBtn() {\n  let btn = document.createElement('button');\n  btn.classList.add('remove-btn');\n  btn.textContent = 'Remove from Favorite';\n  return btn;\n}\n\nexport { createRemoveBtn };"],"names":["$UDlvM","parcelRequire","$495d0e792cda52f8$export$870baaf8e3c75e6c","btn","document","createElement","classList","add","textContent","$f2929da3ca31033d$var$list","querySelector","$f2929da3ca31033d$var$ref","$f2929da3ca31033d$var$favorite","JSON","parse","localStorage","getItem","common","KEY_FAVORITE","$f2929da3ca31033d$var$removeFromFavorite","evt","preventDefault","target","contains","product","$f2929da3ca31033d$var$findProduct","index","findIndex","id","splice","setItem","stringify","$dEdDu","createMarkup","location","reload","elem","productId","Number","closest","dataset","$c1Bmg","instruments","find","addEventListener","$l5ICX","createModal","cardElement","removeBtn","appendChild","some","$f2929da3ca31033d$var$isProductInFavorite","push","$f2929da3ca31033d$var$addToFavorite","parentNode","remove"],"version":3,"file":"favorite.3854c492.js.map"}